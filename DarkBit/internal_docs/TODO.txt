NEW TODO list
2016-07-12 (CW)


DarkBit
=======

Urgent (for production runs):
- Bring paper to internal review [CW]

Before internal paper review:
- Add discussion about LUX likelihoods to paper [FK]
- Double-check that fast option for general oh2 routine is clear [CW]
- Add appropriate paper references for DarkSUSY to paper and referencing system [TB]
- Add caveat information about decay blocks in SLHA files [CW]
- Update paper discussion about local density [JC/CW]
- Update nuclear parameter best fit value discussion [JC]
- Update likelihood technical details in physics papers [all]
- Double check likelihood descriptions in physics papers [all]
- Redo plots Fig. 7 (more channels) and Fig. 8 (official limits) [JC]
- Update cascade code discussions in paper to new treatment [CW]
- Mention all options in the darkbit paper [CW, JE, JC]

After internal paper review started:
- Figure out whether cascade routines run properly when doing MSSM7 scans, but
  have instabilities when running SingletDM (which are hidden by the fall-back
  routines) [JC]
- Check parallelized oh2 DS routines again after scans are working [CW/TB]
- Replace daFunk::raiseInvalidPoint (DarkBit_types.hpp:287) with piped
  exception (Mail Anders 29-07-16) [CW]
- Check accuracy of fallback gsl_integration [CW]
- <sigma v>_eff plots [JC]
- Skype with Joakim
  - STATUS? Figure out h+ higgswidth problems with DS SLHA initialization
    (CMSSM_dsSLHA_problem.yaml) (related to SLHA reader of DS) [JE/TB/CW]
    (bug in the standalone -- ask TB)
  - Go through diskless init problems via skype with Joakim (see file)
- Generate rest Z0 spectrum with pythia [JE] and include in SimYieldTable [JC]
- Add RD_oh2_general to MSSM and SingletDM standalones, remove Sloppy.cpp and
  associated functions (and update numbers and tables in paper) [JC]
- J-factor calculation in gamLike, using the new halo model scheme [CW/SW]
- Prepare post-processing of CMSSM results with alternative DarkBit
  configurations [CW/JC/SW]
- Concepts/cosmetics
  - Check whether DD calculations require decay information from ProcessCatalog [CW]
- Start adding descriptions to the capability database [CW, JE, JC]
- Add getValue docs for SimpleLikelihoods.cpp, SunNeutrinos.cpp, MSSM.cpp, SingletDM.cpp, ... [JE, JC]
— Fix consistency issues in MicrOmegas Singlet CalcHEP files [JC] [Added by JC]
- Set SM values in MicrOmegas Singlet using GAMBIT values [JC] [Added by JC]
- Check that all SM values are being set by MicrOmegas SLHA reader [JC] [Added by JC]
- Properly MicrOmegas shared libraries (remove dependence on main.c) [JC] [Added by JC]
- Include proper isnan check in RD_eff_annrate_SUSY [?]

Before release:
- Clean up header and src files from old mess [CW]
- Make sure that gambit_DarkBit_examples.yaml makes sense and is properly explained [CW]

Later/maybe/not-first-release:
- Write DS patch for raising invalid points (or whatever) when RD
  calculations take too long (if scan actually stall) [TB/JE/CW/PS]
- Add to RD_spectrum_from_ProcessCatalog coannihilation information [?]
- Rewrite RD_spectrum_SUSY in a DS independent way [?]
  (and change RD_annrate_DSprep_func accordingly)
- MicrOmegas MSSM diskless initialization [JC] [Added by JC]
- Set up MicrOmegas MSSM to use GAMBIT decay rates (don’t use internal calculations) [JC] [Added by JC]
— Upgrade MicrOmegas to most recent version [JC] [Added by JC]
— Update LUX limits and SD constraints in DDCalc [Added by JC]
- In GamYields, we should use rescaling for kinematically close but virtually
  open annihilation channels
- Use singlet scalar spectrum object (which is not existing up to now)
- DarkMatterID should come from MSSM_spectrum -- MSSM.cpp
- Update SunNeutrinos.cpp once BF become available from ProcessCatalog [PS]
- Weff plot (ask Joakim about sigmav_eff(T) routines)
- Renormalize the Fermi and other likelihoods in gamLike
- SunNeutrinos.cpp: change below to >= when version numbers are available as
  ints
- Check directly nested integral bug DarkBit.cpp:200 (37bf52e9f79a)
- Implement filter module for masses from Spectrum object to masses used in
  DarkBit
- Split GamYield in cascade and tabulated parts, to allow dynamic stopping
  conditions for the cascade codes
- Remove dependency on mwimp capability everywhere
- Implement Higgs yields
- Test Nazlias `DarkBit_SuperIsoRelic` routines (mail from 14-07-2015)
- Backend PPPC yields table (inclusive Higgs yields)
- CMB likelihoods
- Implement gamma-ray line limits (HESS-II, Fermi)

Done:
- Update valid energy ranges in SimYieldTables_MicrOmegas (GamYields.cpp) [SW]
- Check content of SloopyDarkBit.cpp [CW]
- Remove everything related to setMassesForIB [CW]
- Comment out RelicDensity.cpp:137ff and check whether this introduces more
  problems in relic density calculations [CW]
- Merge new LUX likelihoods into DarkBit_dev [PS/FK]
- WAIT FOR JE: IB routines issues
  - check whether warnings disappear after setting quark masses in DS correctly [JC/JE]
    (if not check out mail from Torsten 26-07 for solutions)
- WAIT FOR JE: Relic densiy routines
  - Check whether top-width is set correctly [JE]
  - Check what is causing warnings for RD calculations
- Merge DarkBit back into master and inform Martin [CW]
- OBSOLETE Confirm that SimYieldTable extrapolation switch is working correctly (Mail Anders 29-07-16) [JC]
- Do Skypes [CW, JE, TB]
  - Go through RelicDensity FIXME items via skype with Torsten (see file)
  - Check IB mass setting routines
  - Make decision about default speeds for RD in DS [TB, CW]
  - Discuss parallel routines
- Add discussion about additional SimYieldTable extrapolation switch [SW]
- gambit_SingletDM_hdf5_bad_process_catalog.yaml :  Delete or keep? [JC]
  indicating a bug? [PS -- checked, works fine now.]
- Move micromegas installation routines into the cmake system [PS]
- Check that masses given to DD calc are always positive (Chris mail from 28
  May) [PS -- all fine; process catalog takes std::abs of spectrum masses.
  Also did a check run and added an explicit check in function in DarkBit returning mwimp.] 
- Fix gsl_integration integration problems [CW]
  - Happens for SingletDM scans and when evaluating MSSM standalone SLHAs
  - Apparently related to integration over noisy FCMC results, when e.g.
    boosting h0_1 spectra
  - Problem can be reduced by increasing the FCMC sample size
  - Unclear why it does not appear in CMSSM or MSSM-7 scans
  - Possible solution options:
    - Write simple trapz integration routine; not accurate/very noisy but
      stable -- could be used as fallback if gsl fails
    - Extend daFunk.hpp to integrate internaly over lists (lots of work)
    - Replace spectrum PDFs by CDFs (might be not enough in all cases)
- Confirm valid energy ranges in SimYieldTables_DarkSUSY - mail from SW 2016-07-15 [TB, JE, SW]
- Check again boost gsl integration for stability (SingletDM_test...) [CW/JC]
- Add warning to FCMC about missing final states (e.g. h0_1) [CW/JC]
- Get correct validation plots for MSSM spectra (DarkBit_standalone_MSSM,
  MSSM_plots.py) [JC]
  Note: Plots look reasonable if SLHA files with decay information are used
- Fix missing states (h0_1 etc) in ProcessCatalog [JC]
  Note: the states were not actually missing but just not initialized if SLHA
  files without decay blocks are used
- Update valid energy ranges in SimYieldTables_DarkSUSY (GamYields.cpp) [SW]
- Double-check SingletDM expression [SW]
- Cascade decay code checks (after update) [CW]
- Fix mixed final quark states in SimYieldsTable_darksusy (GamYields.cpp:464ff) [CW/SW]
- Make final decision about local dark matter density uncertainties [JC]
- Check t tbar final single states in GamYields.cpp [CW]
- More details on FCMC:DecayTable object in paper [CW]
- Figure out 175 GeV complaints of DS (CMSSM_ttbar_problem.yaml) [CW]
- Fix diskless initialization problems with DD couplings [JE/JC/CW]
- Figure out DD problems without SLHA initialization
- Check NUHM_Diver.yaml, and whether it works with micromegas
- Final decision about DD couplings [JC]
- Cascade code [CW]
  - Add genRateMisc to cascade code
  - Check again convergernce critrion in cascade code (seems to be uncritical right now)
  - Decide what to do with quark final states in cascade code (Cascades.cpp:61)
  - Double-check sampling in cascade code
  - Think about convergence criterion in cascade code
  - Check FIXME in Cascades.cpp, decay_chain.cpp [CW]
- GalacticHalo model [CW/SW]
  - Replace gamLike halo discussion with example for setting up a halo
  - Implement GalacticHalo model with r_s as relevant parameter (Pat mail from 2 Jul)
  - Update GalacticHalo model to include Sun distance
  - Update GalacticHalo model in gamlike
  - Make sure that halo model is used consistently between nuLike, gamLike and
    DDCalc


Core
====

Do:
- Understand why the timing system does not work properly for parallel codes
  (looping) [CW]

Later/maybe:
- Target options to specific function -- is this possible (Mail from 26 May from Pat)
- Dependencies of loop-manager managed functions to be added to loop-manager
  loop should only run after *all* relevant parent functors have been evaluated
- Implement function > module rules
- Check out FIXME statements in funktions.hpp again and resolve SegFault issues
- Avoid minimal loops in the dep-resolver / cyclic dependency fix
- Documentation for BaseFunctions
- Set backend versions globally in YAML file as of Pats mail from 21-12-15
- Specify only function name in ObsLike section
- Think about "!ignore" flag for debug purposes
- Implement printing of stand-alone code in core
