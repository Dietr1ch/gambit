#############################################################################
## GAMBIT configuration for the SuperRenormHP model scans.
#############################################################################

Parameters:

  #Dark matter halo parameters.
  Halo_gNFW_rho0:
    rho0: 0.3
      # range: [.2, .6]
    v0: 235.0
    vesc: 550.0
    vrot: 235.0
    rs: 20.0
    r_sun: 8.5
    alpha: 1
    beta: 3
    gamma: 1

  LCDM:
    omega_b: 0.02242
    # prior_type: flat
    # range: [0.020,0.024]
    omega_cdm: 0.11933
    # prior_type: flat
    # range: [0.10,0.13]
    H0: 67.66
    # prior_type: flat
    # range: [62,74]
    tau_reio: 0.0561
    # prior_type: flat
    # range: [0.004,0.20]
    T_cmb: 2.72548
    # FIRAS measurement 2.72548 \pm 0.00057
    #
    # -> Fix to central vsalue
    # fixed_value: 2.72548
    #
    # -> vary within error range
    #prior_type: gaussian
    #mean: [2.75248]
    #sigs: [0.00057]

  PowerLaw_ps:
    ln10A_s: 3
    # prior_type: flat
    # range: [2.9,3.2]
    n_s: 1
    # prior_type: flat
    # range: [0.9,1.10]
    r: 0
    N_pivot: 55

  # cosmo_nuisance_Planck_lite: !import include/Planck_2018/cosmo_nuisance_Planck_lite_flat.yaml

  # model parameters for "DecayingDM_general"
  DecayingDM_photon:
   # mass in GeV
   mass:
     range: [1e-7, 1e-3]
     prior_type: log

   # lifetime in s
   lifetime:
     range: [1e25, 1e30]
     prior_type: log

   # (initial) fraction of decaying species to all of omega_cdm
   fraction:
     fixed_value: 1.0

  # StandardModel_SLHA2: !import include/StandardModel_SLHA2_defaults.yaml
  StandardModel_SLHA2: !import include/StandardModel_SLHA2_Planckbaseline.yaml

Priors:

Printer:

  printer: ascii
  options:
    output_file: "results.dat"
    buffer_length: 10
    delete_file_on_restart: true

  # printer: hdf5
  # options:
  #   output_file: "SuperRenormHP_RD.hdf5"
  #   group: "/"
  #   delete_file_on_restart: true

Scanner:

  use_scanner: grid_sq

  scanners:

    grid_sq:
      plugin: square_grid
      like: LogLike
      grid_pts: 20

    random:
      plugin: random
      like: LogLike
      point_number: 5

ObsLikes:

  # - purpose:      Observable
    # capability:    DecDM_branching_ph
#
  # - purpose:      Observable
    # capability:    DecDM_branching_el
#
  # - purpose:      Observable
    # capability:    DM_width

  # DM Local Halo likelihoods
  # - purpose:    LogLike
    # capability: lnL_rho0

  - purpose:      Observable
    capability:   BBN_abundances
    sub_capabilities: [He4]

  - purpose:      LogLike
    capability:   lnL_INTEGRAL_ang_b
    module:       DarkBit
    type:         double
#
  - purpose:      LogLike
    capability:   lnL_INTEGRAL_ang_l
    module:       DarkBit
    type:         double

  # - purpose:      LogLike
  #   capability:   lnL_HEAO
  #   module:       DarkBit
  #   type:         double

  # - purpose:      LogLike
    # capability:   lnL_oh2
    # module:       DarkBit
    # type:         double

Rules:

  # error calculation precision settings for AltterBBN
  # (use 1 and 0 to speed up Helium abundance calculation for testing)
  # (For more precise calculations, use 3 or 7)
  - capability: AlterBBN_Input
    options:
      failsafe: 0
      err: 0

  # correlation matrix for BBN error calculation todo explain what that is!
  - capability: BBN_abundances
    options:
      isotope_basis: [Yp, D, He3, Be7, Li7]
      correlation_matrix: [[+1.000e00, +1.524e-2, +2.667e-2, +2.303e-2, +2.429e-2],
                           [+1.524e-2, +1.000e00, -8.160e-1, -3.775e-1, -3.653e-1],
                           [+2.667e-2, -8.160e-1, +1.000e00, +3.897e-1, +3.780e-1],
                           [+2.303e-2, -3.775e-1, +3.897e-1, +1.000e00, +9.974e-1],
                           [+2.429e-2, -3.653e-1, +3.780e-1, +9.974e-1, +1.000e00]]
      relative_errors: [1.348e-3, 1.596e-2, 1.618e-2, 6.788e-2, 6.579e-2]

  - capability: classy_final_input
    function: set_classy_input
    module: CosmoBit

  - capability: Omega0_m
    function: get_Omega0_m_classy
    module: CosmoBit

  - capability: Omega0_r
    function: get_Omega0_r_classy
    module: CosmoBit

  - capability: lnL_oh2
    function: lnL_oh2_upperlimit
    module: DarkBit

  - capability: lnL_oh2
    options:
      oh2_fractional_theory_err: 0.3
      oh2_obserr: 0.00091
      oh2_obs: 0.11933
      profile_systematics: false
    dependencies:
      - capability: RD_oh2
        function: RD_oh2_SuperRenormHP
        module: DarkBit

  # Do not use Energy injection in CLASS.
  # To this end, assume the "on-the-spot" treatment (even it will not be used) and
  # set f_eff to 0. This way the energy injection inputs for CLASS are skipped.
  - capability: classy_parameters_EnergyInjection
    function: set_classy_parameters_EnergyInjection_DecayingDM_onSpot

  - capability: f_eff
    function: f_eff_constant
    options:
      f_eff: 0.0

  - capability: classy_MPLike_input
    function: set_classy_input_with_MPLike
    module: CosmoBit

Logger:

  redirection:
    [Default]      : "default.log"
    [DarkBit]      : "DarkBit.log"
    [Scanner]      : "Scanner.log"
  debug: false

KeyValues:

  default_output_path: "runs/Xray_test"

  print_timing_data: false

  debug: false
