##############################################################################################################
## Example GAMBIT configuration file containing only the likelihoods for a ColliderBit Interpolated Yields Run
##############################################################################################################


Parameters:

  # SM parameters.
  StandardModel_SLHA2: !import include/StandardModel_SLHA2_defaults.yaml

  StandardModel_Higgs:
     mH: 125.10 # PDG 2020 value

  SubGeVDM_scalar:
    mDM: 1
    gDM: 2.5
    kappa: 1e-3
    mAp: 3
    etaDM: 0

Priors:

Printer:

  # Just printing to screen rather than writing an output file
  printer: cout

Scanner:

  use_scanner: random

  scanners:

    random:
      plugin: random
      like: LogLike
      point_number: 1

ObsLikes:

  # LHC likelihoods
  - purpose:    LogLike
    capability: LHC_Combined_LogLike
    module:     ColliderBit
    type: double

  # Some Extra observables to output your signals and stuff (good for debugging)
  - purpose:    Observable
    capability: LHC_signals

  # - purpose:    Observable
  #   capability: LHC_LogLike_per_SR

  # - purpose:    likelihood_details
  #   capability: LHC_LogLike_SR_indices

Rules:

  # Use LHC analyses based on fast interpolation rather than on-the-fly MC simulation
  - capability: RunMC
    function: InterpolatedMCInfo
    module: ColliderBit

  - capability: LHC_Combined_LogLike
    options:
      # Do not use capped LHC loglike, change to true if desired
      cap_loglike: false

  - capability: LHC_LogLikes
    function: calc_LHC_LogLikes
    backends:
    - {group: lnlike_marg_poisson, capability: lnlike_marg_poisson_lognormal_error}
    options:
      use_covariances: true
      combine_SRs_without_covariances: false
      use_marginalising: false
      nuisance_prof_initstep: 0.1
      nuisance_prof_convtol: 0.01
      nuisance_prof_maxsteps: 10000
      nuisance_prof_convacc: 1e-5
      nuisance_prof_simplexsize: 1e-5
      nuisance_prof_method: 5
      nuisance_prof_verbosity: 0

    # Signal yields for LHC analyses
  - capability: AllAnalysisNumbers
    function: SubGeVDM_results



Logger:

  redirection:
    [Default] : "default.log"
    [DecayBit] : "DecayBit.log"
    [DarkBit] : "DarkBit.log"
    [PrecisionBit] : "PrecisionBit.log"
    [SpecBit] : "SpecBit.log"
    [Dependency Resolver] : "dep_resolver.log"

KeyValues:

  dependency_resolution:
    prefer_model_specific_functions: true

  likelihood:
    model_invalid_for_lnlike_below: -5e5
    model_invalid_for_lnlike_below_alt: -1e5

  default_output_path: "runs/SubGeVDM_scalar_testBeamDump/"

  print_timing_data: true
