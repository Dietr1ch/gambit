##########################################################################
## GAMBIT configuration for running a Diver scan of the CMSSM using
## only FlavourBit likelihoods.
##
## alpha_s and the top mass are treated as SM nuisance parameters.
##########################################################################


Parameters:

  # SM parameters.
  StandardModel_SLHA2: !import include/StandardModel_SLHA2_scan.yaml

  # SUSY parameters.
  CMSSM:
    M0:
      range: [50, 1e4]
      prior_type: log
    M12:
      range: [50, 1e4]
      prior_type: log
    A0:
      range: [-1e4, 1e4]
      flat_start: -1e2
      flat_end: 1e2
      prior_type: double_log_flat_join
    TanBeta:
      range: [3.0, 70]
    SignMu: 1


Priors:

  # All the priors are simple for this scan, so they are specified directly in the Parameters section.


Printer:

  printer: hdf5

  options:
    output_file: "CMSSM.hdf5"
    group: "/CMSSM"


Scanner:

  use_scanner: de

  scanners:

    multinest:
      plugin: multinest
      like:  LogLike
      nlive: 5000
      tol: 0.1
      updInt: 1

    de:
      plugin: diver
      like: LogLike
      NP: 19200
      convthresh: 1e-5
      verbosity: 1
      lambdajDE: false


ObsLikes:

    # Flavour physics likelihoods
    - purpose:    LogLike
      capability: B2mumu_LogLikelihood_LHCb

    - purpose:    LogLike
      capability: B2mumu_LogLikelihood_CMS

    - purpose:    LogLike
      capability: B2mumu_LogLikelihood_Atlas

    - purpose:    LogLike
      capability: SL_LL

    - purpose:    LogLike
      capability: B2KstarmumuAng_LogLikelihood_Atlas

    - purpose:    LogLike
      capability: B2KstarmumuAng_LogLikelihood_CMS

    - purpose:    LogLike
      capability: B2KstarmumuAng_LogLikelihood_Belle

    - purpose:    LogLike
      capability: B2KstarmumuAng_LogLikelihood_LHCb

    - purpose:    LogLike
      capability: b2sgamma_LogLikelihood

    - purpose:    LogLike
      capability: RK_LogLikelihood

    - purpose:    LogLike
      capability: RKstar_LogLikelihood_LHCb

    # SM nuisance parameter likelihoods
    - capability: lnL_t_mass
      purpose:    LogLike

    - capability: lnL_alpha_s
      purpose:    LogLike

    - capability: SuperIso_obs_values
      purpose:    test


Rules:

  # Tell all functions that are able to dump SLHA files to do so.
  #- options:
  #    drop_SLHA_file: true

  # Globally set the SuperIso observables to be considered
  - options:
      SuperIso_obs_list: [
        AI_BKstargamma,
        BR_BXsgamma,
        BRuntag_Bsmumu,
        BR_Bdmumu,
        BR_BXsmumu_1_6,
        BR_BXsmumu_14.2_22,
        BR_BXsee_1_6,
        BR_BXsee_14.2_22,
        BR_B0Kstar0gamma,
        dGamma/dq2_B0Kstar0mumu_0.1_0.98,
        FL_B0Kstar0mumu_0.1_0.98,
        AFB_B0Kstar0mumu_0.1_0.98,
        S3_B0Kstar0mumu_0.1_0.98,
        S4_B0Kstar0mumu_0.1_0.98,
        S5_B0Kstar0mumu_0.1_0.98,
        S7_B0Kstar0mumu_0.1_0.98,
        S8_B0Kstar0mumu_0.1_0.98,
        S9_B0Kstar0mumu_0.1_0.98,
        dGamma/dq2_B0Kstar0mumu_1.1_2.5,
        FL_B0Kstar0mumu_1.1_2.5,
        AFB_B0Kstar0mumu_1.1_2.5,
        S3_B0Kstar0mumu_1.1_2.5,
        S4_B0Kstar0mumu_1.1_2.5,
        S5_B0Kstar0mumu_1.1_2.5,
        S7_B0Kstar0mumu_1.1_2.5,
        S8_B0Kstar0mumu_1.1_2.5,
        S9_B0Kstar0mumu_1.1_2.5,
        dGamma/dq2_B0Kstar0mumu_2.5_4,
        FL_B0Kstar0mumu_2.5_4,
        AFB_B0Kstar0mumu_2.5_4,
        S3_B0Kstar0mumu_2.5_4,
        S4_B0Kstar0mumu_2.5_4,
        S5_B0Kstar0mumu_2.5_4,
        S7_B0Kstar0mumu_2.5_4,
        S8_B0Kstar0mumu_2.5_4,
        S9_B0Kstar0mumu_2.5_4,
        dGamma/dq2_B0Kstar0mumu_4_6,
        FL_B0Kstar0mumu_4_6,
        AFB_B0Kstar0mumu_4_6,
        S3_B0Kstar0mumu_4_6,
        S4_B0Kstar0mumu_4_6,
        S5_B0Kstar0mumu_4_6,
        S7_B0Kstar0mumu_4_6,
        S8_B0Kstar0mumu_4_6,
        S9_B0Kstar0mumu_4_6,
        dGamma/dq2_B0Kstar0mumu_6_8,
        FL_B0Kstar0mumu_6_8,
        AFB_B0Kstar0mumu_6_8,
        S3_B0Kstar0mumu_6_8,
        S4_B0Kstar0mumu_6_8,
        S5_B0Kstar0mumu_6_8,
        S7_B0Kstar0mumu_6_8,
        S8_B0Kstar0mumu_6_8,
        S9_B0Kstar0mumu_6_8,
        dGamma/dq2_B0Kstar0mumu_15_17,
        FL_B0Kstar0mumu_15_17,
        AFB_B0Kstar0mumu_15_17,
        S3_B0Kstar0mumu_15_17,
        S4_B0Kstar0mumu_15_17,
        S5_B0Kstar0mumu_15_17,
        S7_B0Kstar0mumu_15_17,
        S8_B0Kstar0mumu_15_17,
        S9_B0Kstar0mumu_15_17,
        dGamma/dq2_B0Kstar0mumu_17_19,
        FL_B0Kstar0mumu_17_19,
        AFB_B0Kstar0mumu_17_19,
        S3_B0Kstar0mumu_17_19,
        S4_B0Kstar0mumu_17_19,
        S5_B0Kstar0mumu_17_19,
        S7_B0Kstar0mumu_17_19,
        S8_B0Kstar0mumu_17_19,
        S9_B0Kstar0mumu_17_19,
        dGamma/dq2_BKstarmumu_1.1_6,
        dGamma/dq2_BKstarmumu_15_19,
        BR_B0Kstar0ee_0.1_19.2,
        R-1_B0Kstar0ll_0.045_1.1,
        R-1_B0Kstar0ll_1.1_6,
        R-1_B0Kstar0ll_0.045_1.1_Belle,
        R-1_B0Kstar0ll_1.1_6_Belle,
        R-1_B0Kstar0ll_0.1_8_Belle,
        R-1_B0Kstar0ll_15_19_Belle,
        dGamma/dq2_B0K0mumu_1.1_6,
        dGamma/dq2_B0K0mumu_15_22,
        dGamma/dq2_BKmumu_1.1_6,
        FH_BKmumu_1.1_6,
        dGamma/dq2_BKmumu_15_22,
        FH_BKmumu_15_22,
        R-1_BKll_1.1_6,
        dGamma/dq2_Bsphimumu_0.1_2,
        FL_Bsphimumu_0.1_2,
        S3_Bsphimumu_0.1_2,
        S4_Bsphimumu_0.1_2,
        S7_Bsphimumu_0.1_2,
        dGamma/dq2_Bsphimumu_2_5,
        FL_Bsphimumu_2_5,
        S3_Bsphimumu_2_5,
        S4_Bsphimumu_2_5,
        S7_Bsphimumu_2_5,
        dGamma/dq2_Bsphimumu_5_8,
        FL_Bsphimumu_5_8,
        S3_Bsphimumu_5_8,
        S4_Bsphimumu_5_8,
        S7_Bsphimumu_5_8,
        dGamma/dq2_Bsphimumu_15_17,
        FL_Bsphimumu_15_17,
        S3_Bsphimumu_15_17,
        S4_Bsphimumu_15_17,
        S7_Bsphimumu_15_17,
        dGamma/dq2_Bsphimumu_17_19,
        FL_Bsphimumu_17_19,
        S3_Bsphimumu_17_19,
        S4_Bsphimumu_17_19,
        S7_Bsphimumu_17_19]

  # Globally permit maximal mixing between gauge and family eigenstates
  - options:
      gauge_mixing_tolerance: 0.5
      family_mixing_tolerance: 0.5

  # Choose to use gm2calc for g-2
  - capability: muon_gm2
    function: GM2C_SUSY

  # Choose to base the SM prediction for g-2 on e+e- data
  - capability: muon_gm2_SM
    function: gm2_SM_ee

  # Use SuperIso instead of FeynHiggs for b->sgamma
  - capability: prediction_b2sgamma
    function: SuperIso_prediction_b2sgamma

  # Use SuperIso instead of FeynHiggs for B_s->mumu
  - capability: SuperIso_prediction_B2mumu
    function: SuperIso_prediction_B2mumu

  # Choose to get decays from DecayBit proper, not from an SLHA file.
  - capability: decay_rates
    function: all_decays

  # Choose where to get the precision spectrum from
  - capability: MSSM_spectrum
    type: Spectrum
    function: make_MSSM_precision_spectrum_none


Logger:

  redirection:
    [Debug] : "debug.log"
    [Default] : "default.log"
    [DecayBit] : "DecayBit.log"
    [PrecisionBit] : "PrecisionBit.log"
    [FlavBit] : "FlavBit.log"
    [SpecBit] : "SpecBit.log"
    [Dependency Resolver] : "dep_resolver.log"


KeyValues:

  dependency_resolution:
    prefer_model_specific_functions: true

  likelihood:
    model_invalid_for_lnlike_below: -5e5
    model_invalid_for_lnlike_below_alt: -1e5

  default_output_path: "runs/FlavBit_CMSSM/"

  debug: true
