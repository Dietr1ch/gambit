# GAMBIT configuration file for debug work: problem with GAMBIT + HEPLike + HB/HS
#
# Example build configuration:
#
#   cmake -Ditch="Mathematica;great;NeutrinoBit;ObjectivesBit;ExampleBit;DarkBit;CosmoBit" -DBUILD_FS_MODELS="MSSMatMGUT" -DEIGEN3_INCLUDE_DIR=/path/to/your/eigen -DWITH_MPI=True -DWITH_HEPMC=True -DWITH_ROOT=True  -DCMAKE_Fortran_COMPILER=gfortran-10 -DCMAKE_C_COMPILER=gcc-10 -DCMAKE_CXX_COMPILER=g++-10 ..
#
#   make heplike
#   make susyhit
#   make superiso
#   make higgsbounds
#   make higgssignals
#
#   make
#

Parameters:

  MSSM20atMGUT:
    mHu2: 40000000  # 18562224.3921
    mHd2: 40000000  # 18562224.3921
    mq2_12: 18562224.3921
    mq2_3: 18562224.3921
    ml2_12: 18562224.3921
    ml2_3: 18562224.3921
    md2_12: 18562224.3921
    md2_3: 18562224.3921
    mu2_12: 18562224.3921
    mu2_3: 18562224.3921
    me2_12: 18562224.3921
    me2_3: 18562224.3921
    Ae_12: 0.0  # 503.246
    Ae_3: 0.0  # 503.246
    Ad_3: 0.0  # 503.246
    Au_3: 0.0  # 503.246
    M1: 1000.0  # 8.52927
    M2: 1184.43
    M3: 6508.9
    SignMu: 1 # -1
    TanBeta: 35.2712
  StandardModel_SLHA2:
    CKM_A: 0.814
    CKM_etabar: 0.353
    CKM_lambda: 0.22537
    CKM_rhobar: 0.117
    GF: 1.16638e-05
    alpha1: 0
    alpha2: 0
    alphaS: 0.120281
    alphainv: 127.95
    delta13: 0
    mBmB: 4.18
    mCmC: 1.28
    mD: 0.0047
    mE: 0.000510999
    mMu: 0.105658
    mNu1: 0
    mNu2: 0
    mNu3: 0
    mS: 0.096
    mT: 173.543
    mTau: 1.77686
    mU: 0.0022
    mZ: 91.1876
    theta12: 0.58376
    theta13: 0.15495
    theta23: 0.76958


Priors:

  # All the priors are simple for this scan, so they are specified directly in the Parameters section.


Printer:

  printer: hdf5

  options:
    output_file: "MSSM20_FlavBit_test.hdf5"
    group: "/MSSM20_FlavBit_test"
    buffer_length: 1
    delete_file_on_restart: true


Scanner:

  use_scanner: random

  scanners:

    random:
      plugin: random
      like: LogLike
      point_number: 1

    multinest:
      plugin: multinest
      like:  LogLike
      nlive: 5000
      tol: 0.1
      updInt: 1

    de:
      plugin: diver
      like: LogLike
      NP: 12800
      convthresh: 1e-3
      lambdajDE: false


ObsLikes:

  # LHC likelihoods
  - purpose:    LogLike
    capability: LHC_Higgs_LogLike

  # LEP likelihoods
  - purpose:    LogLike
    capability: LEP_Higgs_LogLike


  # Flavour physics likelihoods

  # Use these for debugging

  # - purpose:    LogLike
  #   capability: RK_LogLikelihood

  # - purpose:    LogLike
  #   capability: RKstar_LogLikelihood_LHCb

  # - purpose:    LogLike
  #   capability: B2KmumuBr_LogLikelihood_LHCb


  - purpose:    LogLike
    capability: B2mumu_LogLikelihood_LHCb

  # - purpose:    LogLike
  #   capability: B2mumu_LogLikelihood_CMS

  # - purpose:    LogLike
  #   capability: B2mumu_LogLikelihood_Atlas


  # - purpose:    LogLike
  #   capability: SL_LL

  # - purpose:    LogLike
  #   capability: B2KstarmumuBr_LogLikelihood_LHCb

  # - purpose:    LogLike
  #   capability: B2KstarmumuAng_LogLikelihood_Atlas

  # - purpose:    LogLike
  #   capability: B2KstarmumuAng_LogLikelihood_CMS

  # - purpose:    LogLike
  #   capability: B2KstarmumuAng_LogLikelihood_Belle

  # - purpose:    LogLike
  #   capability: B2KstarmumuAng_LogLikelihood_LHCb_2020

  # - purpose:    LogLike
  #   capability: Bs2phimumuBr_LogLikelihood

  # - purpose:    LogLike
  #   capability: b2sgamma_LogLikelihood


    # Other observables

   # - purpose:    Observable
   #   capability: RD_oh2

   # - purpose:    Observable
   #   capability: mwimp

   # - purpose:    Observable
   #   capability: sigmav

   # - purpose:    Observable
   #   capability: sigma_SI_p

   # - purpose:    Observable
   #   capability: sigma_SI_n

   # - purpose:    Observable
   #   capability: sigma_SD_p

   # - purpose:    Observable
   #   capability: sigma_SD_n

   # - purpose:    Observable
   #   capability: prediction_b2sgamma

   # - purpose:    Observable
   #   capability: RD

   # - purpose:    Observable
   #   capability: RDstar

   # - purpose:    Observable
   #   capability: SLHA1_violation

  - purpose:    Observable
    capability: MSSM_spectrum
    type:       map_str_dbl

    # Observables for invisible decays of Z and Higgs bosons
   # - purpose: Observable
   #   capability: Z_gamma_nu

   # - purpose: Observable
   #   capability: Z_gamma_chi_0

   # - purpose: Observable
   #   capability: inv_Higgs_BF



Rules:

  # Tell all functions that are able to dump SLHA files to do so.
  - options:
      drop_SLHA_file: true

  # Globally permit maximal mixing between gauge and family eigenstates
  - options:
      gauge_mixing_tolerance: 0.5
      family_mixing_tolerance: 0.5

  # Choose to get decays from DecayBit proper, not from an SLHA file.
  - capability: decay_rates
    function: all_decays
    options:
      allow_stable_charged_particles: false

  # Choose to get the spectrum from SpecBit proper, not an SLHA file.
  # Options set to match benchmark point specified in SpecBit/MSSM_benchmark_points/LesHouches.in.MSSM_1
  - capability: unimproved_MSSM_spectrum
    # function: get_MSSMatMGUT_spectrum_FlexibleEFTHiggs
    function: get_MSSMatMGUT_spectrum_FS
    options:
      precision_goal:        1.0e-4
      max_iterations:        0
      calculate_sm_masses:   false
      pole_mass_loop_order:  2
      ewsb_loop_order:       2
      beta_loop_order:       2
      threshold_corrections_loop_order: 2
      use_higgs_2loop_at_as: true
      use_higgs_2loop_ab_as: true
      use_higgs_2loop_at_at: true
      use_higgs_2loop_atau_atau: true
      invalid_point_fatal: false
      mass_cut: [ ["|~chi+_1|", 45., 1e6] ]

  # Choose where to get the precision spectrum from
  - capability: MSSM_spectrum
    type: Spectrum
    function: make_MSSM_precision_spectrum_none
    #function: make_MSSM_precision_spectrum_W
    #function: make_MSSM_precision_spectrum_H_W
    # function: make_MSSM_precision_spectrum_4H_W
    # The following options only have an impact when using make_MSSM_precision_spectrum_H_W
    # or make_MSSM_precision_spectrum_H_W.
    # Choose to take the precision prediction for the Higgs mass(es) (rather then spectrum generator's).
    # Choose to use the difference between the precision and spectrum generator predictions, along
    # with the precision error estimate, to estimate the theoretical error on the prediction.
    options:
      Higgs_predictions_source: 1
      Higgs_predictions_error_method: 4

  # # Choose to get the precision value of the SM-like Higgs mass from FeynHiggs or SUSYHD
  # - capability: prec_mh
  #   function: FeynHiggs_HiggsMass
  #   #function: SUSYHD_HiggsMass

  # Choose to use functions that get Higgs decays from SUSY-HIT, and t decays from DecayBit native implementation (instead of FeynHiggs)
  - capability: Reference_SM_Higgs_decay_rates
    function: Ref_SM_Higgs_decays_table
  - capability: Reference_SM_other_Higgs_decay_rates
    function: Ref_SM_other_Higgs_decays_table
  - capability: Reference_SM_A0_decay_rates
    function: Ref_SM_A0_decays_table
  - capability: Higgs_decay_rates
    function: MSSM_h0_1_decays
  - capability: h0_2_decay_rates
    function: h0_2_decays
  - capability: A0_decay_rates
    function: A0_decays
  - capability: H_plus_decay_rates
    function: H_plus_decays
  - capability: t_decay_rates
    function: t_decays

  # Choose where to get the Higgs couplings from
  - capability: Higgs_Couplings
    function: MSSM_higgs_couplings_pwid
    #function: MSSM_higgs_couplings_FeynHiggs


  # Use SuperIso instead of FeynHiggs for b->sgamma
  - capability: prediction_b2sgamma
    function: SuperIso_prediction_b2sgamma

  # Observables for flavour likelihoods
  # Use SuperIso instead of FeynHiggs for B_s->mumu
  - capability: prediction_B2mumu
    function: SuperIso_prediction_B2mumu
    options:
      obs_list: [BRuntag_Bsmumu, BR_Bdmumu]

  - capability: B2mumu_LogLikelihood_.*
    options:
      obs_list: [BRuntag_Bsmumu, BR_Bdmumu]

  - capability: prediction_B2KstarmumuAng_.*_Atlas
    options:
      obs_list: [FL, S3, S4, S5, S7, S8]

  - capability: B2KstarmumuAng_LogLikelihood_Atlas
    options:
      obs_list: [FL, S3, S4, S5, S7, S8]

  - capability: prediction_B2KstarmumuAng_.*_CMS
    options:
      obs_list: [P1, P5prime]

  - capability: B2KstarmumuAng_LogLikelihood_CMS
    options:
      obs_list: [P1, P5prime]

  - capability: prediction_B2KstarmumuAng_.*_Belle
    options:
      obs_list: [P4prime, P5prime]

  - capability: B2KstarmumuAng_LogLikelihood_Belle
    options:
      obs_list: [P4prime, P5prime]

  - capability: prediction_B2KstarmumuAng_.*_LHCb
    options:
      obs_list: [FL, AFB, S3, S4, S5, S7, S8, S9]

  - capability: B2KstarmumuAng_LogLikelihood_LHCb_2020
    options:
      obs_list: [FL, AFB, S3, S4, S5, S7, S8, S9]

Logger:

  redirection:
    [Debug] : "debug.log"
    [Default] : "default.log"
    [DecayBit] : "DecayBit.log"
    # [DarkBit] : "DarkBit.log"
    [PrecisionBit] : "PrecisionBit.log"
    [FlavBit] : "FlavBit.log"
    [ColliderBit] : "ColliderBit.log"
    [SpecBit] : "SpecBit.log"
    # [NeutrinoBit] : "NeutrinoBit.log"
    [Dependency Resolver] : "dep_resolver.log"


KeyValues:

  dependency_resolution:
    prefer_model_specific_functions: true

  likelihood:
    model_invalid_for_lnlike_below: -5e5
    model_invalid_for_lnlike_below_alt: -1e5

  default_output_path: "./runs/MSSM20_FlavBit_test"

  debug: true
