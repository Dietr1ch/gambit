# Minimal GAMBIT DarkBit test initialization file (in YAML)

###################################
# Input parameter declarations
###################################

Parameters:

  #SM nuisance parameters.
  StandardModel_SLHA2:

    # Values from PDG 2014
    #  * from http://pdg.lbl.gov/2014/reviews/rpp2014-rev-standard-model.pdf
    # ** from http://pdg.lbl.gov/2014/reviews/rpp2014-rev-phys-constants.pdf
    #  ยง from http://pdg.lbl.gov/2014/tables/rpp2014-sum-leptons.pdf
    #  @ from http://pdg.lbl.gov/2014/tables/rpp2014-sum-quarks.pdf 
    #    (for reference: http://pdg.lbl.gov/2014/reviews/rpp2014-rev-quark-masses.pdf)
    #  $ from http://arxiv.org/abs/1403.4427
    #  ! from http://pdg.lbl.gov/2014/listings/rpp2014-list-z-boson.pdf
    #  & from http://pdg.lbl.gov/2014/listings/rpp2014-list-b-quark.pdf
    #  % from http://pdg.lbl.gov/2014/listings/rpp2014-list-c-quark.pdf
    #  ^ from http://pdg.lbl.gov/2014/reviews/rpp2014-rev-qcd.pdf
    # If more than one source listed, values are equal in both sources.
    # Values in GeV where units apply.
    
    # SLHA1
    # All ranges on parameters are 3 sigma range from PDG 2014
    alphainv:  #1.27940010E+02 # alpha^{-1}(mZ)^MSbar *
               range: [127.898,127.982]
    alphaS  :  #1.18500000E-01 # alpha_s(mZ)^MSbar ^
               range: [0.1167, 0.1203]
    mBmB    :  #4.18000000E+00 # mb(mb)^MSbar &
               range: [4.09, 4.27]
    mT      :  #1.73340000E+02 # mtop(pole) $
               range: [171.06,175.62] 
    GF      :  #1.16637870E-05 # G_Fermi **
               range: [1.1663769E-05, 1.1663805E-05]
    mZ      :  9.11876000E+01 # mZ(pole) !   
    mTau    :  1.77682000E+00 # mtau(pole) ยง
    mNu3    :               0 # mnu3(pole)
    mD      :  #4.80000000E-03 # md(2 GeV)^MSbar @
               range: [3.84E-03, 5.76E-03]
    mU      :  #2.30000000E-03 # mu(2 GeV)^MSbar @
               range: [1.84E-03, 2.76E-03]
    mS      :  #9.50000000E-02 # ms(2 GeV)^MSbar @
               range: [8.0E-02, 0.11]
    mCmC    :  #1.27500000E+00 # mc(mc)^MSbar %
               range: [1.2, 1.35]
    mE      :  5.10998928E-04 # melectron(pole) ยง **
    mMu     :  1.05658372E-01 # mmuon(pole) ยง
    mNu1    :               0 # mnu1(pole)
    mNu2    :               0 # mnu2(pole)
    
    # CKM
    # Wolfenstein parameterisation (matches SLHA2 VCKMIN block)
    # from http://pdg.lbl.gov/2014/reviews/rpp2014-rev-ckm-matrix.pdf
    CKM_lambda  :  0.22537
    CKM_A       :  0.814
    CKM_rhobar  :  0.117
    CKM_etabar  :  0.353
    
    # PMNS
    # from     http://pdg.lbl.gov/2014/tables/rpp2014-sum-leptons.pdf
    # see also http://pdg.lbl.gov/2014/reviews/rpp2014-rev-neutrino-mixing.pdf
    # Note: angles given as x = sin^2(2*theta), so I have converted them as:
    # theta = 0.5*arcsin(sqrt(x))
    # CP-violating phases not measured, so I set them to zero. 
    theta12 :  0.58376 # solar angle
    theta23 :  0.76958 # atmospheric mixing angle
    theta13 :  0.15495 #                                    
    delta13 :  0       # Dirac CP-violating phase
    alpha1  :  0       # first Majorana CP-violating phase
    alpha2  :  0       # second CP-violating Majorana phase
   
  StandardModel_Higgs:
    mH: #125.7
      # 4-sigma range PDG 2015    
      range: [124.1, 127.3] 

  SingletDM:
    mS:
      range: [45., 10000.]
      prior_type: log
    lambda_hS:
      range: [0.0001, 1.00]
      prior_type: log

  #Nuclear matrix parameters.
  nuclear_params_sigmas_sigmal:
    sigmas: #43.0
      range:  [19, 67] 
    sigmal: #58.0
      range:  [31, 85]
    deltau:
      fixed_value:  0.842
    deltad:
      fixed_value: -0.427
    deltas:
      fixed_value: -0.085

  LocalHalo:
    rho0: #0.4 # Local dark matter density
      range: [0.2, 0.8]
    vrot: # Local disk rotation speed
      fixed_value: 235 # km/s
    v0: # Maxwellian most-probable speed
      fixed_value: 235 # km/s
    vesc: # Local galactic escape speed
      fixed_value: 550 # km/s
    vearth: # Keplerian velocity of the earth around the sun
      fixed_value: 29.78 # km/s

#   Uncomment the below to use DarkSUSY nuclear parameters.
#    nuclear_params_fnq: !import NuclearParams_fnq_DarkSUSY.yaml


##############################
# Prior setup
##############################

Priors:


##############################
# Printer setup
##############################

Printer:

  printer: hdf5
  options:
    output_file: "gambit_output.hdf5"
    group: "/sing/let"
    delete_file_if_exists: true
    delete_file_on_restart: true


##############################
# Scanner setup
##############################

Scanner:
  use_scanner: multinest

  scanners:

    multinest:
      plugin: MultiNest
      like:  LogLike
      nlive: 4000
      tol: 0.5

    de:
      plugin: Diver
      like: LogLike
      NP: 1000
      verbosity: 1
      
    twalk:
      plugin: twalk
      tolerance: 1.03
      #projection_dimension: 4
      #chain_number:

    mcmc:
      plugin: GreAT
      nTrialLists: 5
      nTrials: 40000
      like: Likelihood
      aux_printer_ind_samples_options:
    
#twalk:
#      plugin: twalk
#      tolerance: 1.001
#      projection_dimension: 4
#      chain_number: 10


###############################
# Observables of interest
###############################

ObsLikes:

# IceCube likelihood (skip to keep things quick)
#    - capability: IC79_loglike
#      purpose: LogLike

# Fermi LAT dwarf limits
    - capability: lnL_FermiLATdwarfs
      function: lnL_FermiLATdwarfs_gamLike
      purpose:  LogLike
    - capability: lnL_Higgs_invWidth
      purpose: LogLike

# Simple one-sided gaussian relic density likelihood
    - capability: RD_oh2
      purpose: Observable
    - capability: lnL_oh2
      purpose: LogLike
      function: lnL_oh2_upperlimit

# XENON100 2012 direct detection likelihood
    - capability: XENON100_2012_LogLikelihood
      purpose: LogLike

# LUX 2013 direct detection likelihood
    - capability: LUX_2013_LogLikelihood
      purpose:  LogLike

# SI nuclear parameters likelihood
    - capability: lnL_SI_nuclear_parameters
      purpose:  LogLike

# DM Local Halo likelihoods
    - capability: lnL_rho0
      purpose: LogLike
    - capability: lnL_vrot
      purpose: LogLike
    - capability: lnL_v0
      purpose: LogLike
    - capability: lnL_vesc
      purpose: LogLike

# SM Nuisance Parameter Likelihoods:
    - capability: lnL_alpha_em
      purpose:    LogLike
    - capability: lnL_alpha_s
      purpose:    LogLike
    - capability: lnL_GF
      purpose:  LogLike
    - capability: lnL_t_mass
      purpose:    LogLike
    - capability: lnL_mbmb
      purpose:    LogLike
    - capability: lnL_mcmc
      purpose:    LogLike
    - capability: lnL_light_quark_masses
      purpose:  LogLike
    - capability: LHC_Higgs_LogLike
      purpose:  LogLike

Rules:

  - capability: GA_AnnYield
    function: GA_AnnYield_General
    options:
        Emin: 1.

  - capability: cascadeMC_FinalStates
    options:
        cMC_finalStates:
            - gamma

  - capability: SimYieldTable
    function: SimYieldTable_DarkSUSY

  - capability: SingletDM_spectrum
    function: get_SingletDM_spectrum

  - capability: DD_couplings
    function: DD_couplings_SingletDM
    dependencies:
        - capability: SingletDM_spectrum
          function: get_SingletDM_spectrum

  - capability: TH_ProcessCatalog
    function: TH_ProcessCatalog_SingletDM
    dependencies:
        - capability: SingletDM_spectrum
          function: get_SingletDM_spectrum

  # Relic density ----------------------
  - capability: RD_fraction
    function: RD_fraction_from_oh2
    options:
      mode: leq_one

  - capability: RD_oh2
    #function: RD_oh2_general   # general routines (DS backend)
    #function: RD_oh2_DarkSUSY   # darksusy backend
    function: RD_oh2_MicrOmegas  # micromegas backend
    backends:
    - {backend: MicrOmegasSingletDM}
    options:
      fast: 1  # Accuracy options (used by micromegas)
      Beps: 1e-2

  - capability: RD_spectrum
    options:
      CoannMaxMass: 1.01 # include only co-annihilating particles up to this mass


  # Direct detection -------------------
  # For MSSM-based models, which of the DarkSUSY or micrOMEGAs routines
  # to use must be explicitly specified here (uncomment the desired one).
  # The SingletDM function can be explicitly specified for the SingletDM
  # model, but the dependency resolver will choose it by default as it
  # is the only one available for that model.
  - capability: DD_couplings
    #function: DD_couplings_DarkSUSY    # couplings from darksusy backend
    #function: DD_couplings_MicrOmegas  # couplings from micromegas backend
    function: DD_couplings_SingletDM   # couplings for singlet DM model
    options:
        rescale_couplings: 1  # For unit tests: rescale couplings

  # Nuclear Parameter Likelihoods (All values in MeV)
  - capability: lnL_SI_nuclear_parameters
    function: lnL_sigmas_sigmal
    options:
      sigmas_central: 43.
      sigmas_error: 8.
      sigmal_central: 58.
      sigmal_error: 9.

  # DM Halo Model Likelihoods
  # (rho0_obserr/rho0_obs)^2 is the variance of ln(rho0/rho0_obs)
  - capability: lnL_rho0  # Local dark matter density
    function: lnL_rho0_lognormal
    options:
      rho0_obs: 0.4 # GeV/cm^3
      rho0_obserr: .15 # GeV/cm^3
  - capability: lnL_vrot  # Local disk rotation speed
    function: lnL_vrot_gaussian
    options:
      vrot_obs: 235 # km/s
      vrot_obserr: 20 # km/s
  - capability: lnL_v0   # Maxwellian most-probable speed
    function: lnL_v0_gaussian
    options:
      v0_obs: 235 # km/s
      v0_obserr: 20 # km/s
  - capability: lnL_vesc # Local galactic escape speed
    function: lnL_vesc_gaussian
    options:
      vesc_obs: 550 # km/s
      vesc_obserr: 35 # km/s

  # Decays
  - capability: decay_rates
    function: all_decays

  # Precision Bit
  - capability: lnL_light_quark_masses
    options:
      # m_u/m_d
      mud_central: 0.48
      mud_error: 0.10
      # m_s / ((m_u + m_d)/2)
      msud_central: 27.5
      msud_error: 1.0
      # m_s
      ms_central: 95.E-03
      ms_error: 5.E-03

#########################
# Logging setup
#########################

Logger:

  # Redirection of specific messages according to tags
  # Can redirect to stdout or stderr by specifying these as the "filenames".
  # Obviously this also means it is impossible to redirect output to actual
  # files with these names.

  redirection:
    [Debug] : "debug.log"
    [Default] : "default.log"
    [DecayBit] : "DecayBit.log"
    [DarkBit] : "DarkBit.log"
    [PrecisionBit] : "PrecisionBit.log"
    [ColliderBit] : "ColliderrBit.log"
    [SpecBit] : "SpecBit.log"
    [Dependency Resolver] : "dep_resolver.log"

##########################
# Name/Value Section
##########################

KeyValues:

  dependency_resolution:
    prefer_model_specific_functions: true

  likelihood:
    model_invalid_for_lnlike_below: -1e4

  default_output_path: "runs/singletDM_ScannerBit_test4/"

  #debug: true
