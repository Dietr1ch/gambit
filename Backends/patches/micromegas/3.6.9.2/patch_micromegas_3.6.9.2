diff -rupN ./sources/micromegas.h ../../installed/micromegas/3.6.9.2/sources/micromegas.h
--- ./sources/micromegas.h	2014-05-13 12:26:25.000000000 +0100
+++ ../../installed/micromegas/3.6.9.2/sources/micromegas.h	2016-07-21 15:38:04.713995015 +0100
@@ -170,6 +170,9 @@ output parameters:
           we get a non-SM particle which has not 1->2 decays.  
 */
 
+extern int readSpectra();
+extern void mInterp(double,int,int,double*);
+
 extern aChannel* vSigmaCh;
 extern double zInterp(double z, double * tab);
 /* input parameter:
diff -rupN ./sources/omega.c ../../installed/micromegas/3.6.9.2/sources/omega.c
--- ./sources/omega.c	2014-05-13 12:26:25.000000000 +0100
+++ ../../installed/micromegas/3.6.9.2/sources/omega.c	2016-07-21 15:38:04.717995015 +0100
@@ -139,7 +139,7 @@ static  double sigma(double PcmIn)
     if(r<=0) return 0;
     l=AUX[nsub22].virt;
     l_=5-l;  
-    if(AUX[nsub22].w[l_-2])
+    if(r>0 && AUX[nsub22].w[l_-2])
     { double m1,m2,sqrtS;
       m1=pmass[0];
       m2=pmass[1];
diff -rupN ./sources/spectra.c ../../installed/micromegas/3.6.9.2/sources/spectra.c
--- ./sources/spectra.c	2014-05-13 12:26:25.000000000 +0100
+++ ../../installed/micromegas/3.6.9.2/sources/spectra.c	2016-07-21 15:38:04.713995015 +0100
@@ -332,7 +332,7 @@ static double Spectra22A(char*name1,char
 /* ------------------------------------------------- */
 
 
-static int readSpectra(void)
+int readSpectra(void)
 { static int rdOk=0;
   int k,l,i,n;
   FILE *f;
@@ -421,7 +421,7 @@ double zInterp(double zz, double * tab)
 
 
 
-static void mInterp(double Nmass,  int  CHin,int  CHout, double*tab)
+void mInterp(double Nmass,  int  CHin,int  CHout, double*tab)
 {  
 //  float mi[NEn]={10,25,50,80.3,91.2,100,150,176,200,250,350,500,750,1000,1500,2000,3000,5000};
    double mi[NEn]={2,5,10,25,50,80.3,85,91.2,92,95,100,110,120,125,130,140,150,176,200,250,350,500,750,1000,1500,2000,3000,5000};
@@ -1009,8 +1009,8 @@ double calcSpectrum(int key, double *Sg,
   if(PrintOn )
   { int i=0;
     char txt[100];
-    printf("\n Annihilation cross section %.2E cm^3/s\n",vcs  );
-    printf("   Channel           Contribution \n");     
+    //printf("\n Annihilation cross section %.2E cm^3/s\n",vcs  );
+    //printf("   Channel           Contribution \n");     
     for(i=0;vSigmaCh[i].weight>1.E-4;i++)
     {
     sprintf(txt,"%s,%s -> %s %s ", vSigmaCh[i].prtcl[0],
@@ -1018,7 +1018,7 @@ double calcSpectrum(int key, double *Sg,
                                    vSigmaCh[i].prtcl[2],
                                    vSigmaCh[i].prtcl[3]);
     if(vSigmaCh[i].prtcl[4]) strcat(txt,vSigmaCh[i].prtcl[4]);                               
-    printf("  %-20.20s  %.2E\n",txt,vSigmaCh[i].weight);
+    //printf("  %-20.20s  %.2E\n",txt,vSigmaCh[i].weight);
     }
   }     

diff -rupN ./CalcHEP_src/c_source/SLHAplus/include/SLHAplus.h ../../installed/micromegas/3.6.9.2/CalcHEP_src/c_source/SLHAplus/include/SLHAplus.h
--- ./CalcHEP_src/c_source/SLHAplus/include/SLHAplus.h 2014-05-13 13:26:21.000000000 +0200
+++ ../../installed/micromegas/3.6.9.2/CalcHEP_src/c_source/SLHAplus/include/SLHAplus.h 2017-05-21 18:03:50.000000000 +0200
@@ -18,6 +18,10 @@ extern "C" {
 
 #include "aList.h"
 
+#ifndef complex
+#define complex _Complex
+#endif
+
 extern int FError;
 extern int slhaBasicReader( int mode, int (*readLn)(int, char*),int * anydate,char * end );
 extern void cleanSLHAdata(void);
