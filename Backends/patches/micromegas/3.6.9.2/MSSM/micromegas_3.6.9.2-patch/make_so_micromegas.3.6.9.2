#!/bin/bash 

make
cd MSSM
make main=main.c
if [[ "$OSTYPE" == "darwin"* ]]; then
     gcc  -shared -fPIC -o libmicromegas.so main.c lib/aLib.a ../sources/micromegas.a \
     ../CalcHEP_src/lib/dynamic_me.a ../sources/micromegas.a work/work_aux.a \
     lib/aLib.a ../CalcHEP_src/lib/libSLHAplus.a ../CalcHEP_src/lib/num_c.a \
     ../CalcHEP_src/lib/ntools.a ../CalcHEP_src/lib/serv.a \
     $PWD/../CalcHEP_src/lib/sqme_aux.so \
     -rdynamic -ldl -lm
#     -L/usr/X11R6/lib -lX11 -rdynamic -ldl -lm
else
     gcc  -shared -fPIC -o libmicromegas.so main.c lib/aLib.a ../sources/micromegas.a \
     ../CalcHEP_src/lib/dynamic_me.a ../sources/micromegas.a work/work_aux.a \
     lib/aLib.a ../CalcHEP_src/lib/libSLHAplus.a ../CalcHEP_src/lib/num_c.a \
     ../CalcHEP_src/lib/ntools.a ../CalcHEP_src/lib/serv.a \
     $PWD/../CalcHEP_src/lib/sqme_aux.so \
     -rdynamic -ldl -lm
#     -lX11 -rdynamic -ldl -lm
fi
