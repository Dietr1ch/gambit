diff -rupN darksusy-6.2.2/makefile.in ../installed/darksusy/6.2.2/makefile.in
--- darksusy-6.2.2/makefile.in	2020-02-12 18:28:53.008236862 +0100
+++ ../installed/darksusy/6.2.2/makefile.in	2020-02-12 19:10:27.244309971 +0100
@@ -395,19 +395,19 @@ coffee :
 # Below are instructions for shared libraries, currently used by GAMBIT
 
 ds_mssm_shared : lib/libds_mssm.a lib/libds_empty.a lib/libds_core.a lib/libHS.a lib/libHB.a lib/libFH.a lib/libisospin.a lib/libisajet.a
-	$(ADD_SCR) $(DS_INSTALL)/lib/libds_core_mssm.so $(DS_INSTALL)/lib/libds_mssm.a $(DS_INSTALL)/lib/libds_empty.a $(DS_INSTALL)/lib/libds_core.a $(DS_INSTALL)/lib/libHS.a $(DS_INSTALL)/lib/libHB.a $(DS_INSTALL)/lib/libFH.a $(DS_INSTALL)/lib/libisospin.a $(DS_INSTALL)/lib/libisajet.a
+	$(ADD_SCR) $(DS_INSTALL)/lib/libds_core_mssm.so $(DS_INSTALL)/lib/libds_mssm.a $(DS_INSTALL)/lib/libds_empty.a $(DS_INSTALL)/lib/libds_core.a $(DS_INSTALL)/lib/libHS.a $(DS_INSTALL)/lib/libHB.a $(DS_INSTALL)/lib/libFH.a $(DS_INSTALL)/lib/libisospin.a $(DS_INSTALL)/lib/libisajet.a $(DS_INSTALL)/lib/libhealpix.a $(DS_INSTALL)/lib/libcfitsio.a
 
 ds_generic_decayingDM_shared : lib/libds_generic_decayingDM.a lib/libds_empty.a lib/libds_core.a
-	$(ADD_SCR) $(DS_INSTALL)/lib/libds_core_generic_decayingDM.so $(DS_INSTALL)/lib/libds_generic_decayingDM.a $(DS_INSTALL)/lib/libds_empty.a $(DS_INSTALL)/lib/libds_core.a 
+	$(ADD_SCR) $(DS_INSTALL)/lib/libds_core_generic_decayingDM.so $(DS_INSTALL)/lib/libds_generic_decayingDM.a $(DS_INSTALL)/lib/libds_empty.a $(DS_INSTALL)/lib/libds_core.a $(DS_INSTALL)/lib/libhealpix.a $(DS_INSTALL)/lib/libcfitsio.a
 
 ds_generic_wimp_shared : lib/libds_generic_wimp.a lib/libds_empty.a lib/libds_core.a
-	$(ADD_SCR) $(DS_INSTALL)/lib/libds_core_generic_wimp.so $(DS_INSTALL)/lib/libds_generic_wimp.a $(DS_INSTALL)/lib/libds_empty.a $(DS_INSTALL)/lib/libds_core.a 
+	$(ADD_SCR) $(DS_INSTALL)/lib/libds_core_generic_wimp.so $(DS_INSTALL)/lib/libds_generic_wimp.a $(DS_INSTALL)/lib/libds_empty.a $(DS_INSTALL)/lib/libds_core.a $(DS_INSTALL)/lib/libhealpix.a $(DS_INSTALL)/lib/libcfitsio.a
 
 ds_silveira_zee_shared : lib/libds_silveira_zee.a lib/libds_empty.a lib/libds_core.a
-	$(ADD_SCR) $(DS_INSTALL)/lib/libds_core_silveira_zee.so $(DS_INSTALL)/lib/libds_silveira_zee.a $(DS_INSTALL)/lib/libds_empty.a $(DS_INSTALL)/lib/libds_core.a 
+	$(ADD_SCR) $(DS_INSTALL)/lib/libds_core_silveira_zee.so $(DS_INSTALL)/lib/libds_silveira_zee.a $(DS_INSTALL)/lib/libds_empty.a $(DS_INSTALL)/lib/libds_core.a $(DS_INSTALL)/lib/libhealpix.a $(DS_INSTALL)/lib/libcfitsio.a
 
 ds_vdSIDM_shared : lib/libds_vdSIDM.a lib/libds_empty.a lib/libds_core.a
-	$(ADD_SCR) $(DS_INSTALL)/lib/libds_core_vdSIDM.so $(DS_INSTALL)/lib/libds_vdSIDM.a $(DS_INSTALL)/lib/libds_empty.a $(DS_INSTALL)/lib/libds_core.a 
+	$(ADD_SCR) $(DS_INSTALL)/lib/libds_core_vdSIDM.so $(DS_INSTALL)/lib/libds_vdSIDM.a $(DS_INSTALL)/lib/libds_empty.a $(DS_INSTALL)/lib/libds_core.a $(DS_INSTALL)/lib/libhealpix.a $(DS_INSTALL)/lib/libcfitsio.a
 
 .PHONY: all config_paths darksusy_lib dslib private install_tables \
 	clean clobber uninstall rmmore libisajet pdf-manual \

diff -rupN darksusy-6.2.2/src_models/mssm/an_ib/dsIBffdxdy.f ../installed/darksusy/6.2.2/src_models/mssm/an_ib/dsIBffdxdy.f
--- darksusy-6.2.2/src_models/mssm/an_ib/dsIBffdxdy.f	2020-10-23 19:46:26.000000000 +0200
+++ ../installed/darksusy/6.2.2/src_models/mssm/an_ib/dsIBffdxdy.f	2020-01-15 09:08:13.000000000 +0100
@@ -15,7 +15,6 @@
 *** date: 2007-07-05
 *** update: 2016-04-04 (switched to analytic tree-level expressions to avoid
 ***                     recursive call to dssigmav0)
-***         2020-10-23 bug-fix for light fermions (corrected FSR-subtraction)
 *****************************************************************************
 
       real*8 function dsIBffdxdy(IBch,x,y)
@@ -23,6 +22,7 @@
       implicit none
       include 'dsmssm.h'
       include 'dsmpconst.h'
+      include 'dshmcom.h'
       include 'dsidtag.h'
       include 'dsio.h'
 
@@ -126,33 +126,30 @@ c...set up couplings
 
 c...import IB expressions for |M|**2 from form/mathematica; 
 c...for light leptons and quarks, take the simplified expression with mf=0:
-c... TB bug fix 10/2020: this does NOT work when trying to consistently
-c...                     subtract the FSR contribution later on
-c...                     -> ALWAYS use the full expressions!
-
-c      if ((IBch.eq.4).or.(IBch.eq.5).or.(IBch.eq.7).or.
-c     -    (IBch.eq.8).or.(IBch.eq.10)) then
-c            tmpresult=
-c     -        -2*m0**6*(-1 + x)*(x**2 - 2*x*y + 2*y**2)*
-c     -       ((C11/((msf1**2 + m0**2*(1 - 2*y))*
-c     -             (msf1**2 + m0**2*(1 - 2*x + 2*y))) +
-c     -         C12/
-c     -          ((msf2**2 + m0**2*(1 - 2*y))*
-c     -          (msf2**2 + m0**2*(1 - 2*x + 2*y))))**2 +
-c     -        (C151/
-c     -          ((msf1**2 + m0**2*(1 - 2*y))*
-c     -            (msf1**2 + m0**2*(1 - 2*x + 2*y))) +
-c     -          C152/
-c     -          ((msf2**2 + m0**2*(1 - 2*y))*
-c     -            (msf2**2 + m0**2*(1 - 2*x + 2*y))))**2)
-c           endif
-c
+
+      if ((IBch.eq.4).or.(IBch.eq.5).or.(IBch.eq.7).or.
+     -    (IBch.eq.8).or.(IBch.eq.10)) then
+            tmpresult=
+     -        -2*m0**6*(-1 + x)*(x**2 - 2*x*y + 2*y**2)*
+     -       ((C11/((msf1**2 + m0**2*(1 - 2*y))*
+     -             (msf1**2 + m0**2*(1 - 2*x + 2*y))) + 
+     -         C12/
+     -          ((msf2**2 + m0**2*(1 - 2*y))*
+     -          (msf2**2 + m0**2*(1 - 2*x + 2*y))))**2 + 
+     -        (C151/
+     -          ((msf1**2 + m0**2*(1 - 2*y))*
+     -            (msf1**2 + m0**2*(1 - 2*x + 2*y))) + 
+     -          C152/
+     -          ((msf2**2 + m0**2*(1 - 2*y))*
+     -            (msf2**2 + m0**2*(1 - 2*x + 2*y))))**2)
+           endif
+
 c...for heavy leptons and quarks, add
 c...contributions from all linear independent combinations of coupling
 c...constants separately, utilizing various symmetries
-c
-c      if ((IBch.eq.6).or.(IBch.eq.9).or.(IBch.eq.11)
-c     -    .or.(IBch.eq.12)) then
+
+      if ((IBch.eq.6).or.(IBch.eq.9).or.(IBch.eq.11)
+     -    .or.(IBch.eq.12)) then
 
           zf=(mz**2*(16*m0**4+GZ**2*mz**2-8*m0**2*mz**2
      -       +mz**4))/(-4*m0**2 + mz**2)**2
@@ -193,8 +190,7 @@ c     -    .or.(IBch.eq.12)) then
      -
      -  +  dsIBffdxdy_8(x,y,CZ5,CH,m0,mf,mz,mh03,GZ,Gh03)
 
-c... TB bugfix 10/20: ALWAYS use the full expressions (see above)
-c      endif   ! contribution from heavy fermions
+      endif   ! contribution from heavy fermions
 
 
 c... this is the analytically obtained 2-body 
@@ -221,7 +217,6 @@ c 
      -        (mz**2*(GZ**2*mz**2 + (-4*m0**2 + mz**2)**2))))/
      -   (Gh03**2*mh03**2 + (-4*m0**2 + mh03**2)**2)
 
-
         msq2bodyds = msq2body
 
 
@@ -293,9 +288,6 @@ c      if (IBch.eq.5.or.IBch.eq.6.or.   
                                                      ! only for those channels for
 c     -    IBch.eq.9.or.IBch.eq.11.or.IBch.eq.12)    ! which Pythia runs exist.
      
-c... TEST: the FSR contribution *can* be larger -- but should not be so by much!
-c      write(*,*) IBch, tmpresult, dsIBfsrdxdy(IBch,x,y), '(',x,y, ')'
-     
       tmpresult = tmpresult - dsIBfsrdxdy(IBch,x,y)
 
       dsIBffdxdy=tmpresult

